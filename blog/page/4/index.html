
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Temple Coding</title>
  <meta name="author" content="Thiago Temple">

  
  <meta name="description" content="Eu sempre tive muita dificuldade de me concentrar (e de aproveitar) as &ldquo;aulas tradicionais&rdquo; dentro de uma sala de aula. Ir para uma sala &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://templecoding.com/blog/page/4">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Temple Coding" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
  

</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><h1><a href="/">Temple Coding</a></h1>

<h2>código, tecnologia e outras nerdices</h2>


</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:templecoding.com" />
    <input class="search" type="text" name="q" placeholder="Procurar"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Arquivos</a></li>
  <li><a href="/blog/categories/videocast">Videocast</a></li>
  <li><a href="/sobre">Sobre</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/09/30/fazendo-moocs/">Fazendo MOOCs</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-09-30T00:00:00-04:00"  data-updated="true">30/09/2012</time>
        
         | <a href="/blog/2012/09/30/fazendo-moocs/#disqus_thread">Comentários</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Eu sempre tive muita dificuldade de me concentrar (e de aproveitar) as &ldquo;aulas tradicionais&rdquo; dentro de uma sala de aula. Ir para uma sala de aula em um horário determinado, e acompanhar o ritmo dos outros (professor e alunos), nunca me atraiu muito. Então posso dizer que meu período na faculdade foi muito mal aproveitado. Eu me formei, isso é um fato (de acordo com o meu diploma). Mas não posso dizer que carrego muito, ou mesmo pouco, do conteúdo que me foi transmitido no período em que fiquei na faculdade.</p>

<p>Por causa disso, hoje eu corro atrás de muitos dos ensinamentos que desperdicei nesse período, seja na forma de livros, artigos, revistas, etc. Foi por isso que fiquei muito animado quando descobri os <a href="http://en.wikipedia.org/wiki/Massive_open_online_course">Massive open online courses</a><strong><a href="http://en.wikipedia.org/wiki/Massive_open_online_course">,</a></strong><a href="http://en.wikipedia.org/wiki/Massive_open_online_course"> o</a><a href="http://en.wikipedia.org/wiki/Massive_open_online_course">u</a><a href="http://en.wikipedia.org/wiki/Massive_open_online_course"> M</a><a href="http://en.wikipedia.org/wiki/Massive_open_online_course">OOCs</a>, que, traduzindo rapidamente o que está na Wikipedia quer dizer:</p>

<blockquote>&#8220;&#8230;um tipo de curso online direcionadp à participação em larga escala e com acesso aberto via web&#8230;&#8221;</blockquote>


<p>Enfim, tratam-se de cursos online gratuitos, com alguma forma de avaliação e orientação de um professor. Em alguns (ou vários) casos, esses cursos recebem o respaldo de universidades conhecidas. Alguns até garantem certificados.</p>

<p>Um site que tem diversos cursos é o <a href="http://www.coursera.org/">Cursera.org</a>, vale a pena conferir, existem assuntos dos mais variados, outro também bem interessante é o <a href="http://www.edx.org/">edX</a>, este, só para se ter uma idéia tem cursos com o respaldo do MIT, Harvard e Berkeley.</p>

<p>Achei a idéia bem interessante. Nos cursos que estou participando, funciona mais ou menos assim: existe uma palestra (video on-line) com o conteúdo da semana, avaliações são feitas com questões objetivas respondidas no próprio site e também é possível que seja solicitado um trabalho escrito.</p>

<p>Claro que existem prazos a serem cumpridos, mas você tem uma certa flexibilidade de horários pra fazer as coisas, além do que, se preferir é possível somente assistir os videos sem se preocupar com avaliações, o que já garante uma boa fonte de informação.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/09/25/001-videocast-produtividade-com-asp-net-mvc-4/">001 - VideoCast - Produtividade com ASP.NET MVC 4</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-09-25T00:00:00-04:00"  data-updated="true">25/09/2012</time>
        
         | <a href="/blog/2012/09/25/001-videocast-produtividade-com-asp-net-mvc-4/#disqus_thread">Comentários</a>
        
      </p>
    
  </header>


  <div class="entry-content"><iframe src="http://www.youtube.com/embed/Zp_cLt69ee8" frameborder="0" width="640" height="360"></iframe>


<h2>Produtividade com ASP.NET MVC 4</h2>


<p>Nesse video eu mostro um pouco de como é possível obter Produtividade com ASP.NET MVC 4. O ASP.NET MVC vem melhorando a cada versão, e na versão quatro a nossa vida como programadores web ficou ainda mais fácil. E quem não gosta disso, não é?</p>

<h2>Alguns itens que falo no video</h2>


<ul>
    <li>Scaffolding de controllers e views</li>
    <li>Integração com o Entity Framework</li>
    <li>Autenticação usando OAuth</li>
    <li>WebAPI</li>
</ul>


<p>O código desse vídeo <a href="https://github.com/vintem/MVC4BlogDemo">está disponível no meu GitHub</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/09/26/injecao-de-dependencia-em-atributosfiltros-do-mvc/">Injeção de Dependência em Atributos/Filtros do MVC</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-09-26T00:00:00-04:00"  data-updated="true">26/09/2011</time>
        
         | <a href="/blog/2011/09/26/injecao-de-dependencia-em-atributosfiltros-do-mvc/#disqus_thread">Comentários</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>É muito comum termos dropdowns/combos que contém o mesmo tipo de dados em páginas diferentes. Por exemplo digamos que seja necessário um combo com status em diferente páginas do projeto e que esses diferentes status tenham que vir do banco de dados.</p>

<p>Uma forma de mostrar isso na página, é salvar uma lista com os status que você pega do banco de dados na propriedade ViewData e exibir na página.</p>

<p>Como não devemos repetir esse código sempre, o que eu fiz foi criar um filtro do ASP.Net MVC e decorar as actions que precisam desses dados com esse filtro. Essa classe ficou assim:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">ListaStatusAttribute</span> <span class="p">:</span> <span class="n">ActionFilterAttribute</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnActionExecuted</span><span class="p">(</span><span class="n">ActionExecutedContext</span> <span class="n">filterContext</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="kt">var</span> <span class="n">repository</span> <span class="p">=</span> <span class="k">new</span> <span class="n">NHibernateRepository</span><span class="p">();</span>
</span><span class='line'>        <span class="kt">var</span> <span class="n">tiposDocumento</span> <span class="p">=</span> <span class="n">repository</span><span class="p">.</span><span class="n">FindAll</span><span class="p">().</span><span class="n">OrderBy</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span> <span class="n">t</span><span class="p">.</span><span class="n">Descricao</span><span class="p">);</span>
</span><span class='line'>        <span class="kt">var</span> <span class="n">controllerBase</span> <span class="p">=</span> <span class="n">filterContext</span><span class="p">.</span><span class="n">Controller</span><span class="p">;</span>
</span><span class='line'>        <span class="n">controllerBase</span><span class="p">.</span><span class="n">ViewData</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;Status&quot;</span><span class="p">,</span> <span class="n">tiposDocumento</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ótimo, agora é só decorar as actions com esse atributo. No ViewData teremos um item chamado Status com todos os status ordenados pela descricao. Um código feito uma vez só. Mas o que eu não gosto do código acima é que eu crio dentro da método uma instância da classe NHibernateRepository. Eu gostaria que isso fosse resolvido sem que uma dependência direta fosse criada para essa classe, afinal eu sei que essa classe implementa a interface IRepository, portanto eu posso ter uma dependência para a interface, o que é muito mais elegante.</p>

<p>Ultimamente eu tenho usado o <a href="http://docs.castleproject.org/Windsor.MainPage.ashx">Windsor</a> para resolver todas as minhas dependências. E nesse caso vou usá-lo em conjunto com o ServiceLocator da <a href="http://entlib.codeplex.com/">Microsoft Enterprise Library</a>. Se você já usa o Windsor é bem fácil de resolver, se não usa, dê uma olhada no tutorial no site do projeto e verá como é fácil usá-lo junto com o MVC.</p>

<p>Uma vez com seus componentes registrados, adicione uma referência para Microsoft.Practices.ServiceLocation.dll e no global.asax faça o seguinte:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="n">ServiceLocator</span><span class="p">.</span><span class="n">SetLocatorProvider</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="n">WindsorServiceLocator</span><span class="p">(</span><span class="n">container</span><span class="p">));</span>
</span></code></pre></td></tr></table></div></figure>


<p>Isso vai adicionar ao ServiceLocator um provedor de serviços que será implementado usando o Windsor.
<a href="http://commonservicelocator.codeplex.com/wikipage?title=Castle%20Windsor%20Adapter&amp;referringTitle=Home&amp;ProjectName=commonservicelocator"> A classe WindsorServiceLocator pode ser encontrada para download aqui.</a></p>

<p>Pronto, agora dentro do meu atributo eu posso trocar o código para:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnActionExecuted</span><span class="p">(</span><span class="n">ActionExecutedContext</span> <span class="n">filterContext</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">repository</span> <span class="p">=</span> <span class="n">ServiceLocator</span><span class="p">.</span><span class="n">Current</span><span class="p">.</span><span class="n">GetInstance</span><span class="p">();</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">tiposDocumento</span> <span class="p">=</span> <span class="n">repository</span><span class="p">.</span><span class="n">FindAll</span><span class="p">().</span><span class="n">OrderBy</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span> <span class="n">t</span><span class="p">.</span><span class="n">Descricao</span><span class="p">);</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">controllerBase</span> <span class="p">=</span> <span class="n">filterContext</span><span class="p">.</span><span class="n">Controller</span><span class="p">;</span>
</span><span class='line'>    <span class="n">controllerBase</span><span class="p">.</span><span class="n">ViewData</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;Tipos&quot;</span><span class="p">,</span> <span class="n">tiposDocumento</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>E aquela dependência feia foi removida.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/09/17/globalizacao-de-validacao-do-jquery-com-o-asp-net-mvc-3/">Globalização de validação do jQuery com o ASP.NET MVC 3</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-09-17T00:00:00-04:00"  data-updated="true">17/09/2011</time>
        
         | <a href="/blog/2011/09/17/globalizacao-de-validacao-do-jquery-com-o-asp-net-mvc-3/#disqus_thread">Comentários</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>O Asp.Net MVC 3 tem uma ótima funcionalidade que é a validação no cliente usando o plugin do <a href="http://docs.jquery.com/Plugins/Validation" target="_blank">jQuery validations</a> e usando um script da própria Microsoft a validação é feita sem que seja necessário nenhum codificação especial. Basta usar os atributos do namespace <em>System.ComponentModel.DataAnnotations.</em></p>

<p>Pra quem não sabe, para fazer essa validação basta adicionar os seguintes scripts (que já estão no template padrão de um novo site Asp.Net Mvc 3):</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">”/Scripts/jquery-1.6.2.min.js”</span> <span class="na">type=</span><span class="s">”text/javascript”</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">”/Scripts/jquery.validate.min.js”</span> <span class="na">type=</span><span class="s">”text/javascript”</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">”/Scripts/jquery.validate.unobtrusive.min.js”</span> <span class="na">type=</span><span class="s">”text/javascript”</span><span class="nt">&gt;&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Muito simples de verdade! Mas existe um problema, esse script não é globalizado, então digamos que você tenha que usar uma data na sua classe e você gostaria de validá-la, por exemplo eu tinha uma classe que entre outras coisas tinha que salvar uma data, para simplificar, algo como isso:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">Pessoa</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Nome</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Sexo</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Rg</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="na">    [DataType(DataType.EmailAddress)]</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Email</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="na">    [DataType(DataType.Date)]</span>
</span><span class='line'>    <span class="k">public</span> <span class="n">DateTime</span><span class="p">?</span> <span class="n">DataNascimento</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Quando eu informava a data 16/09/1980, por exemplo, automaticamente era detectado uma data inválida, já que o esperado é que a data estivesse no padrão mm/dd/aaaa, mas é claro que no Brasil o padrão é outro. Então como corrigir? Primeiro fazer uso do plugin <a href="https://github.com/jquery/globalize">Globalize do jQuery</a>, adicione referências a dois scripts (que é claro, podem ser baixados no site do projeto).</p>

<p>Depois disso, tudo o que precisa ser feito é determinar qual a cultura que quer usar e indicar o parser do globalize para validar a data:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">Globalize</span><span class="p">.</span><span class="nx">culture</span><span class="p">(</span><span class="s2">&quot;pt-BR&quot;</span><span class="p">);</span>
</span><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">validator</span><span class="p">.</span><span class="nx">methods</span><span class="p">.</span><span class="nx">date</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">optional</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="o">||</span> <span class="nx">Globalize</span><span class="p">.</span><span class="nx">parseDate</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>Não podia ser mais simples!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/08/16/tornando-o-acesso-a-dados-simples-com-o-simple-data/">Tornando o acesso a dados simples com o Simple.Data</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-16T00:00:00-04:00"  data-updated="true">16/08/2011</time>
        
         | <a href="/blog/2011/08/16/tornando-o-acesso-a-dados-simples-com-o-simple-data/#disqus_thread">Comentários</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Recentemente eu precisei fazer um trabalho que era bem simples do ponto de vista de acesso a dados. Era algo como ler arquivos textos e salvar os dados em uma base de dados SQL Server. Simples assim.</p>

<p>Se tratando de uma tarefa simples, usar um framework como o <a href="http://nhforge.org/Default.aspx" target="_blank">NHibernate</a> iria tornar a tarefa mais complexa do que precisaria. Eu poderia também usar o bom e velho ADO.NET, mas estamos em 2011 e já temos 4 versões do .NET Framework. Acho que já passei dessa fase.</p>

<p>Ai lembrei que recentemente ouvi um episódio do <a href="http://herdingcode.com/?p=305" target="_blank">Herding Code falando sobre um tal de Simple.Data.</a></p>

<p>E não é que o nome vem bem a calhar, o Simple.Data é realmente simples.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="n">Document</span> <span class="nf">Insert</span><span class="p">(</span><span class="n">Document</span> <span class="n">newDocument</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">db</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Database</span><span class="p">.</span><span class="n">Open</span><span class="p">();</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">db</span><span class="p">.</span><span class="n">Documents</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="n">newDocument</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>E foi tudo isso que eu precisei escrever para abrir uma conexão com o banco, com base na minha string de conexão configurada no meu arquivo <strong>app.config </strong>e inserir um documento na tabela documentos.</p>

<p>O Simple.Data faz uso do tipo <a href="http://robsonramos.com/index.php/2011/05/11/entendendo-o-tipo-dynamic-no-c/" target="_blank">dynamic do C# 4</a> e portanto é necessário usar a versão 4 do .NET Framework.</p>

<p>O que aconteceu no código acima é o que o Simple.Data entendeu que deveria existir uma tabela chamada Documents no banco de dados e automaticamente iria inserir um registro nessa tabela mapeando os campos da tabela com as propriedades da classe Document (desde que esses tivessem os mesmos nomes).</p>

<p>Da mesma forma se eu quiser fazer uma busca basta fazer algo assim:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="n">IEnumerable</span> <span class="nf">All</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">db</span> <span class="p">=</span> <span class="n">Database</span><span class="p">.</span><span class="n">Open</span><span class="p">();</span>
</span><span class='line'>    <span class="k">return</span>  <span class="n">db</span><span class="p">.</span><span class="n">Documents</span><span class="p">.</span><span class="n">All</span><span class="p">().</span><span class="n">Cast</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Assim, estamos listando todos os registros da tabela Documents.</p>

<p>Agora imagine que essa tabela tenha um coluna chamada User e que, obviamente, o classe Document tem uma propriedade chamada User. Para fazer uma consulta filtrando pelo nome do usuario bastaria fazer assim:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="kt">var</span> <span class="n">db</span> <span class="p">=</span> <span class="n">Database</span><span class="p">.</span><span class="n">Open</span><span class="p">();</span>
</span><span class='line'><span class="n">Document</span> <span class="n">document</span> <span class="p">=</span> <span class="n">db</span><span class="p">.</span><span class="n">Documents</span><span class="p">.</span><span class="n">FindByUser</span><span class="p">(</span><span class="s">&quot;nomedousuario&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Lindo! Dinamicamente o Simple.Data vai procurar um registro que tenha o campo User = &ldquo;nomedousuario&rdquo; e vai popular as propriedades da classe com as colunas da tabela que tenham o mesmo nome.</p>

<p>Por fim, um último exemplo, digamos que exista uma colunda/propriedade chamada Amount e você queira pegar os documentos com valor maior que 50. Veja como é simples:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="kt">var</span> <span class="n">db</span> <span class="p">=</span> <span class="n">Database</span><span class="p">.</span><span class="n">Open</span><span class="p">();</span>
</span><span class='line'><span class="n">IEnumerable</span> <span class="n">documents</span> <span class="p">=</span> <span class="n">db</span><span class="p">.</span><span class="n">Documents</span><span class="p">.</span><span class="n">FindAll</span><span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">Documents</span><span class="p">.</span><span class="n">Amount</span> <span class="p">&gt;</span> <span class="m">50</span><span class="p">).</span><span class="n">Cast</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>Com certeza existe mais coisas no Simple.Data do que eu citei aqui, mas a idéia é que ele é bem simples e rápido. <a href="http://bit.ly/p7XsUx">Usando o Nuget para adicionar o pacote</a>, adicionar uma string de conexão chamada <span class="Apple-style-span" style="font-family: Consolas, Monaco, monospace; font-size: 12px; line-height: 18px; white-space: pre;">Simple.Data.Properties.Settings.DefaultConnectionString</span> e pronto, você já consegue usar o Simple.Data.</p>

<p>Para saber mais visite <a href="http://bit.ly/oZ4teC" target="_blank">o wiki do projeto no GitHub</a>.</p>

<p><a href="http://bit.ly/r3SnzM">O código fonte usado nesse exemplo pode ser visto aqui</a>.<!--:--></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/08/04/criando-snippets-para-o-visual-studio-2010/">Criando Snippets para o Visual Studio 2010</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-04T00:00:00-04:00"  data-updated="true">04/08/2011</time>
        
         | <a href="/blog/2011/08/04/criando-snippets-para-o-visual-studio-2010/#disqus_thread">Comentários</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><strong>Motivação</strong></p>

<p>Apesar de ser e gostar muito de ser um desenvolvedor, sou totalmente a favor de escrever a menor quantidade de código possível. Porque menos código, geralmente quer dizer menos erros. Com isso em mente eu resolvi criar Snippets de código no Visual Studio 2010. Você pode até não saber o que é um snippet mas com certeza já usou um. Um snippet é uma pequena porção de código que é reutilizável. Por exemplo, entre no seu Visual Studio, e dentro de um método digite <em>foreach</em> e aperte <strong>Tab</strong>. Pronto, isso é um snippet.</p>

<p>Seguindo essa mentalidade e fazendo testes unitários eu me peguei escrevendo diversas vezes esse código:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="na">[Test]</span>
</span><span class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">Meuteste</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Meu objetivo era que digitasse apenas um comando de atalho (nesse caso escolhi <em>ntest</em>) e que esse código fosse gerado pra mim, permitindo que eu apenas alterasse o nome do método.</p>

<p><strong>Snippet Designer</strong></p>

<p>O Visual Studio 2010 permite que você crie snippets através do seu editor de XML, que é o padrão, afinal de contas um snippet nada mais é do que um arquivo xml. Mas existe uma extensão para o VS2010 chamada Snippet Desiner que facilita um pouco o trabalho. Então vá em Tools –> Extension Manager e adicione a extensão.</p>

<p><img class="aligncenter" src="/images/2011/08/Snippet-Designer.png" title="Snippet Designer" ></p>

<p><strong>Criando o Snippet</strong></p>

<p>Crie um novo projeto no VS2010 e adicione um arquivo do tipo XML. Dê o nome que quiser, mas use a extensão .snippet. No meu caso o nome do arquivo é NUnitTest.snippet.</p>

<p>Ao criar o arquivo ele estará vazio e, portanto, o Snippet Designer não irá abri-lo. Clique com o botão direito no arquivo e me Open With, selecione o XML (Text) Editor e clique em OK.</p>

<p><img class="aligncenter" src="/images/2011/08/EditorXml.png" title="Editor XML" ></p>

<p>Dentro do documento XML clique com o botão direito e selecione a opção Insert Snipet</p>

<p><img class="aligncenter" src="/images/2011/08/Inser-.png" title="Inser" ></p>

<p>Em seguida selecione a opção Snippet.</p>

<p><img class="aligncenter" src="/images/2011/08/Inserir-Snippet.png" title="Inserir Snippet" ></p>

<p>O xml necessário para a criação do snippet será gerado, como você pode perceber ele mesmo é um snippet. #inception #feelings :)</p>

<p>É possível editar ali mesmo o xml, ou então podemos usar o Snippet Designer que acabos de instalar. Salve o arquivo e feche-o. No Solution Explorer, mais uma vez clique com o botão direito no arquivo e em Open With e dessa vez selecione a opção Snippet Desiger, uma tela como a abaixo deverá aparecer.</p>

<p><img class="aligncenter" src="/images/2011/08/Snippet-Designer2.png" title="Snippet Designer 2" ></p>

<p>Algumas coisas que precisam ser alteradas, no topo do lado esquerdo, dê um título e selecione a linguangem, no meu caso foi NUnit Test e C#. As proprieades do arquivo são bem claras, mas o que você deve ter uma atenção é pra propriedade <strong>Shortcut. </strong>O que você colocar ali é o que você vai digitar antes do Tab na hora de codificar. Eu preenchi o meu como <em>ntest.</em></p>

<p>Na parte de baixo é onde você define a parte do código que é customizável quando você fica dando tabs no seu snippet, no meu caso eu queria customizar apenas o nome do método, então alterei o item que vem ali para <em>testName</em> e deixei campo Defaults to para <em>testName</em> também.</p>

<p>Por fim, a principal e maior parte da tela é onde você coloca o seu código do snippet, apenas preencha o código que você quer ali normalmente e substituia a parte customizável pelas variáveis que você criou, prestando atenção que o nome dessa variável deve estar entre $$, assim: <em>$testName$. </em>Veja como ficou meu snippet após as mudanças.</p>

<p><img class="aligncenter" src="/images/2011/08/Snippet-Editado.png" title="Snippet editado" ></p>

<p><strong>Utilizando o Snippet</strong></p>

<p>O VS2010 usa diversos snippets, mas obviamente é muito fácil adicionar aqueles que foram criados pelos usuários. Basta carregar os arquivos .snippet criados por você dentro dele.</p>

<p>Por padrão quando se instala o VS2010 ele cria uma pasta dentro da pasta Meus Documentos chamada Visual Studio 2010, ali navegue para –> Code Snippets –>; Visual C# –> My Code Snippets. Copie o(s) arquivo(s) .snippet que você criou e cole dentro dessa pasta. Isso é claro, considerando que são snippets de C#, caso contrário coloque na pasta correta.</p>

<p>É provável que tudo já esteja funcionando, mas para ter certeza, dentro do VS2010 vá em Tools –> Code Snippets Manager, selecione a linguagem e deve aparecer algo assim.</p>

<p><img class="aligncenter" src="/images/2011/08/Code-Snippet-Manager.png" title="Code Snippet Manager" ></p>

<p>Se não aparecer ali, basta clicar em Add, navegar e selecionar a pasta onde estão os arquivos .snippet. Pronto! Isso é tudo que você precisa.</p>

<p>Agora é só testar. Vá até uma classe, digite <em>ntest</em> e aperte <strong>Tab. </strong>O código do snippet deve aparecer e o cursor deve estar posicionado no nome do método, pronto para que este seja alterado.</p>

<p><strong>Finalizando</strong></p>

<p>O snippet que eu criei é bem simples, mas de um código que eu faço toda hora, se você tem alguma coisa desse tipo e quer facilitar, esse é o caminho. :)</p>

<p><a href="https://github.com/vintem/VS2010Snippets" target="_blank">O código desse projeto está diposnível para download aqui.</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/05/29/analise-de-livro-growing-object-oriented-software-guided-by-tests/">Análise: Growing Object-Oriented Software, Guided by Tests</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-05-29T00:00:00-04:00"  data-updated="true">29/05/2011</time>
        
         | <a href="/blog/2011/05/29/analise-de-livro-growing-object-oriented-software-guided-by-tests/#disqus_thread">Comentários</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Eu acabei de ler <a href="http://www.amazon.com/gp/product/0321503627/ref=as_li_tf_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0321503627&amp;linkCode=as2&amp;tag=tempcodi0f-20" rel="nofollow">Growing Object-Oriented Software, Guided by Tests</a> e posso dizer que é um livro altamente recomendável.</p>

<p><a href="http://www.amazon.com/gp/product/0321503627/ref=as_li_tf_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0321503627&amp;linkCode=as2&amp;tag=tempcodi0f-20" rel="nofollow"><img class="alignright" src="/images/2011/05/51VI2SgJRwL._SL205.jpg" title="Growing Object-Oriented Software, Guided by Tests" ></a></p>

<p>Para quem está interessado em começar, ou já começou e quer apefeiçoar a prática de desenvolver software usando testes antes de escrever o &ldquo;código de produção&rdquo;, é um ótimo livro.</p>

<blockquote><em>Testing is no longer just about keeping defects from the users; instead, it&#8217;s about helping the team to understand the features that users need and to deliver those features reliably and predictably.</em></blockquote>


<p>Após duas partes teóricas, o livro, na terceira parte, começa a ficar mais prático.</p>

<p>A terceira parte do livro se passa toda desenvolvendo um exemplo e realmente evoluindo uma aplicação aos poucos. Exemplo feito em Java, mas que nada atrabalha para quem não conhece muito da linguagem. Além disso, é ótimo seguir a linha de pensamento dos autores e ver como eles enxergam a evolução de um software orientado a objetos. E uma das melhores partes de sistema de exemplo, é que ele não fica no básico, muito pelo contrário, traz problemas do &ldquo;mundo real&rdquo;, como interação com serviços externos e testes de interface de usuário.</p>

<p>Embora a terceira parte seja ótima, é na quarta parte onde o livro realmente mostra seu valor. A quarta parte fala de desenvolvimento orientado a testes de forma sustentável, tratando de assuntos como: quando usar objetos mock ou não, facilitar a leitura e o entendimento dos testes, construção de objetos complexos necessários aos testes, entre outros.</p>

<p>Ainda existe um capítulo muito interessante que fala sobre testes na camada de persistência a dados, uma parte que eu sempre achei complexa de se testar. Ali, encontrei dicas valiosas.</p>

<p>Uma ótima leitura, recomendo!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/03/16/o-livro-eletronico-e-so-vantagem/">O livro eletrônico é só vantagem</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-16T00:00:00-04:00"  data-updated="true">16/03/2011</time>
        
         | <a href="/blog/2011/03/16/o-livro-eletronico-e-so-vantagem/#disqus_thread">Comentários</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Se você ainda não se convenceu de que os livros eletrônicos são uma boa opção ou mesmo uma realidade hoje em dia, quem sabe a lista de vantagens abaixo possa te ajudar.</p>

<p>Eu virei um fã e um adepto dos livros eletrônicos, sério, acho pouco provável eu comprar um livro em papel novamente (havendo a opção eletrônica) e principalmente se for técnico.</p>

<p>Veja só se essa lista te ajuda:</p>

<ol>
    <li>geralmente são mais baratos</li>
    <li>se você compra livros em papel on-line paga frete, nos eletrônicos, obviamente não</li>
    <li>você não precisa esperar que eles cheguem pelo correio</li>
    <li>já existem diversos livros em português e podem ser comprados em sites brasileiros como <a href="http://www.livrariasaraiva.com.br/livros-digitais/?ID=BD61DCEF7DB030E0D19190666" target="_blank">Saraiva</a> e <a href="http://www.livrariacultura.com.br/scripts/ebooks/index.asp?sid=8738214911315816569556325&amp;k5=C76F132&amp;uid=" target="_blank">Cultura</a></li>
    <li>se você gosta de anotar nos livros, existe um software da Amazon, o <a href="http://www.amazon.com/gp/help/customer/display.html/ref=sv_kinc_9?ie=UTF8&amp;nodeId=200127470" target="_self">Kindle</a> que permite marcar e anotar nos textos</li>
    <li>você não precisa comprar um Tablet ou E-Reader para ler seus livros eletrônicos, esse mesmo software do <a href="http://www.amazon.com/gp/help/customer/display.html/ref=sv_kinc_9?ie=UTF8&amp;nodeId=200127470" target="_blank">Kindle está disponível para diversas plataformas</a>, inclusive celulares</li>
    <li>se você tiver um E-Reader ou Tablet, pode levar todos os seus livros com você e <a href="http://abrindoolivro.wordpress.com/2010/09/04/ereaders-no-brasil-novidades/" target="_blank">existem diversos no mercado</a></li>
    <li>se você não quiser comprar um E-Reader e tiver um smartphone também é possível. Eu tenho um Samsung Galaxy S com Android e a leitura é muito boa e tranquila, o maior problema é pra ler código ou ver imagens, quando é só texto, vai bem.</li>
    <li>é ecologicamente correto</li>
</ol>


<p>A maior desvantagem do livro eletrônico é que não é possível expo-lo em uma instante, bom, pelo menos não em uma real<a href="http://www.shelfari.com/vintem/shelf" target="_self"> porque na virtual já dá</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/10/salvando-alteraes-inacabadas-com-git/">Salvando alterações inacabadas com Git</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-10T00:00:00-05:00"  data-updated="true">10/11/2010</time>
        
         | <a href="/blog/2010/11/10/salvando-alteraes-inacabadas-com-git/#disqus_thread">Comentários</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Quanto mais eu uso o Git, mais eu gosto dele. Fato.</p>

<p>Sabe quando você está no meio de uma atividade, ela não está acabada, e chega um bug que você tem que corrigir? Ai o que você faz com a sua alteração que está no meio do caminho?</p>

<p>O Git tem um comando chamado stash. O stash é uma área separada dos seus commits feita exatamente para isso, salvar modificações inacabadas. E o uso é bem simples.</p>

<p>git stash save</p>

<p>Esse comando salva as modificações do diretório de trabalho e limpa o log para o último commit.</p>

<p>Por exemplo, digamos que você tenha um projeto que você concluiu a versão 1 e está no meio do desenvolvimento da versão 2.0 e você criou um branch para isso.</p>

<p><img class="aligncenter" src="/images/2010/11/v2.png" title="v2" ></p>

<p>E então, enquanto você no meio do desenvolvimento de uma outra atividade, aparece um bug para corrigir, seu status do Git estaria mais ou menos assim:</p>

<p><img class="aligncenter" src="/images/2010/11/git_status.png" title="Git status" ></p>

<p>Você não pode fazer um commit, porque se você fizer isso o build irá quebrar, e você é muito responsável para fazer uma coisa dessas, né?. O que fazer?`</p>

<p><img class="aligncenter" src="/images/2010/11/moron.jpg" title="Moron" ></p>

<p>É ai que o git stash resolve. Com o comando git stash save você obtém como resultado:</p>

<p><img class="aligncenter" src="/images/2010/11/stash.png" title="Stash" ></p>

<p>O buffer fica limpo, você já pode fazer um checkout da versão 1.0, corrigir o bug e depois voltar para o branch da versão 2.0 e fazer um rebase da versão 1.0.</p>

<p>Quando estiver nesse ponto basta executar o comando git stash pop para resgatar suas atualizações.</p>

<p><img class="aligncenter" src="/images/2010/11/stash_pop.png" title="Stash pop" ></p>

<p>Pronto, você está no ponto onde parou. E viva o controle de versões.</p>

<p>Existem mais opções no comando stash. Eu recomendo dar uma olhada na <a href="http://www.kernel.org/pub/software/scm/git/docs/git-stash.html">documentação do git</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/05/ruby-para-desenvolvedores-netparte-2/">Ruby para desenvolvedores .NET–parte 2</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-05T00:00:00-04:00"  data-updated="true">05/11/2010</time>
        
         | <a href="/blog/2010/11/05/ruby-para-desenvolvedores-netparte-2/#disqus_thread">Comentários</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div style="padding-left: 10px; border: 1px dashed;">

Esta é uma série de artigos sobre Ruby para desenvolvedores .NET, confira os outros em:

<a href="/blog/2010/11/03/ruby-para-desenvolvedores-netparte-1/">Ruby para desenvolvedores .NET – parte 1</a>

</div>


<p>Ruby, é uma linguagem orientada a objetos. É  possível reconhecer, apenas com pequenas diferenças na sintaxe, algumas similaridades e diferenças de funcionamento, se comparado com o C#.</p>

<p>Podemos ver no código abaixo, a definição de uma classe(Usuario), a definição de um construtor (initialize), a definição de um método (autorizar_acesso) e a criação de 2 atributos, nome e email.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Usuario</span>
</span><span class='line'>  <span class="kp">attr_accessor</span> <span class="ss">:nome</span><span class="p">,</span> <span class="ss">:email</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">nome</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@nome</span> <span class="o">=</span> <span class="n">nome</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">autorizar_acesso</span>
</span><span class='line'>    <span class="kp">false</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>O que podemos ver de diferente aqui, é que quando chamamos o método attr_accessor para criar as propriedades nome e email, internamente o Ruby cria duas variáveis de instância chamadas @nome e @email e essas variáveis podem, obviamente, ser acessadas por qualquer método daquele objeto.’</p>

<p>A propósito, instanciar a class Usuario é tão simples quanto:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">usuario</span> <span class="o">=</span> <span class="no">Usuario</span><span class="o">.</span><span class="n">new</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Retorno de valores</strong></p>

<p>Uma outra coisa importante de lembrar no Ruby, é que a última instrução de um método sempre é retornada. Portanto dentro do método autorizar_acesso, estamos retornando o valor false. Colocar false como última instrução (e nesse caso, a única) é o mesmo que dizer return false.</p>

<p>Por exemplo, os dois métodos abaixo fazem a mesma coisa:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">soma</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span><span class='line'>  <span class="c1"># faz um monte de coisa desnecessaria aqui</span>
</span><span class='line'>  <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">soma</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span><span class='line'>  <span class="c1"># faz um monte de coisa desnecessaria aqui</span>
</span><span class='line'>  <span class="n">resultado_soma</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</span><span class='line'>  <span class="k">return</span> <span class="n">resultado_soma</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Nos dois casos, x é somado a y e o resultado da soma é retornado.</p>

<p><strong>Herança</strong></p>

<p>Assim como em C#, Ruby também tem <a href="http://pt.wikipedia.org/wiki/Heran%C3%A7a_(inform%C3%A1tica)">herança</a> como podemos ver no exemplo abaixo:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Usuario</span>
</span><span class='line'>  <span class="kp">attr_accessor</span> <span class="ss">:nome</span><span class="p">,</span> <span class="ss">:email</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">nome</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@nome</span> <span class="o">=</span> <span class="n">nome</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">autorizar_acesso</span>
</span><span class='line'>    <span class="kp">false</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">UsuarioEspecial</span> <span class="o">&lt;</span> <span class="no">Usuario</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">autorizar_acesso</span>
</span><span class='line'>    <span class="kp">true</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>No código acima a classe UsuarioEspecial herda da classe Usuario e sobrescreve o método autorizar_acesso. Assim já podemos ver que é possível usar também o polimorfismo.</p>

<p><strong>Métodos Estáticos</strong></p>

<p>Ruby não tem métodos estáticos realmente, mas ele tem, o que é conhecido como <span style="text-decoration: underline;">métodos de classe</span> e funcionam de forma similar aos métodos estáticos do C#. Para  usar métodos de classe basta que na declaração do método seja colocada a palavra chave <span style="text-decoration: underline;">self</span>, como podemos ver:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">UsuarioEspecial</span> <span class="o">&lt;</span> <span class="no">Usuario</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">salvar</span>
</span><span class='line'>    <span class="n">enviar_email</span><span class="p">(</span><span class="s2">&quot;texto do email&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="c1">#salvar os dados do usuario</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">autorizar_acesso</span>
</span><span class='line'>    <span class="kp">true</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="kp">private</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">enviar_email</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
</span><span class='line'>    <span class="c1"># envia email</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>O método salvar pode ser chamado diretamente na classe UsuarioEspecial, não é necessário criar uma instância.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">UsuarioEspecial</span><span class="o">.</span><span class="n">salvar</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ainda no código acima podemos ver que para declarar um método privado pasta adicionar a palavra chave <span style="text-decoration: underline;">private</span> e qualquer método declarado abaixo dela será considerado privado.</p>

<p><strong>Interfaces</strong></p>

<p>Interfaces são um artifício  das linguagens estáticas para dizer ao compilador que uma classe tem um ou mais métodos.</p>

<p>No Ruby não existe um compilador e portanto não existe essa checagem prévia. Também existe a questão de que podemos alterar uma classe Ruby mesmo depois que ela já foi declarada, mas vamos falar disso depois. Portanto não existe a necessidade de interfaces.</p>

<p>Digamos que exista a seguinte situação feita em C#:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">interface</span> <span class="n">IControlePagamento</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">void</span> <span class="nf">Pagar</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">Pagamento</span> <span class="p">:</span> <span class="n">IControlePagamento</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">void</span> <span class="nf">Pagar</span><span class="p">()</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="c1">// logica de pagamento</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>O que esse código bem simples faz, é dizer ao compilador que a classe Pagamento implementa os métodos da Interface IControlePagamento. Em Ruby a única coisa que temos que fazer é efetivamente implementar o método Pagar()</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">ControlePagamento</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">pagar</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Isso tem vantagens e desvantagens.</p>

<p>A vantagem é que o código em Ruby é muito mais sucinto e objetivo, não é preciso escrever código para satisfazer o compilador. Existe apenas código para resolver o problema do negócio.</p>

<p>A desvantagem é que você não tem o aviso imediato do compilador caso o método não seja implementado.</p>

<p>Ainda assim, se você é adepto de técnicas como <a href="http://pt.wikipedia.org/wiki/Test_Driven_Development">TDD</a>, esse é um problema fácil de resolver, já que seus testes ficariam responsáveis por isso.</p>

<p>Outro recurso disponível no Ruby é que, toda classe automaticamente herda da classe Class, na classe Class existe um método chamado <span style="text-decoration: underline;">respond_to?</span>. Esse método verifica se um objeto responde/contém a um determinado método.</p>

<p><img class="aligncenter" src="/images/2010/11/respond_to_false.png"></p>

<p>No exemplo acima a classe ControlePagamento foi definida sem o método pagar, veja que quando foi chamado o método respond_to? o retorno foi false.</p>

<p>Já abaixo o método foi definido e a resposta foi true.</p>

<p><img class="aligncenter" src="/images/2010/11/respond_to_true.png"></p>

<p>Enfim, existem opções para controlar isso e há gente que faça, mas vale dizer que pelo que tenho visto, o mais comum é simplesmente seguir uma convenção.</p>

<p><strong>Conclusão</strong></p>

<p>Nesse artigo já vimos mais algumas diferenças mais marcantes do Ruby, no próximo vou falar um pouco do Object Model do Ruby.</p>

<p>Duvidas, criticas ou sugestões? Deixe um comentário.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/5/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/3/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/08/26/publicando-um-site-octopress-usando-github-pages-em-uma-nova-maquina-de-dev/">Publicando um site Octopress usando GitHub pages a partir de um novo computador</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/08/25/instalando-uma-maquina-de-desenvolvimento-com-dois-comandos/">Instalando uma máquina de desenvolvimento com dois comandos</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/30/responsabilidade-unica-com-javascript/">Só é uma bagunça se você deixar. Responsabilidade única com JavaScript</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/23/meu-ted-talk-favorito/">Meu TED Talk favorito</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/16/programacao-orientada-a-coincidencia/">Programação orientada à coincidência</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Thiago Temple -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>


<script type="text/javascript">
var sc_project=5357260;
var sc_invisible=1;
var sc_security="14d7610a";
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" + scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="web stats"
href="http://statcounter.com/free-web-stats/" target="_blank"><img
class="statcounter" src="http://c.statcounter.com/5357260/0/14d7610a/1/"
alt="web stats"></a></div></noscript>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'templecoding';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>






<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
