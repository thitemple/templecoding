
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Temple Coding</title>
  <meta name="author" content="Thiago Temple">

  
  <meta name="description" content="Hoje vou falar um pouco sobre como fazer &ldquo;testes unitários&rdquo; no BizTalk. Tenho que usar as aspas pra dizer testes unitários porque o &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://templecoding.com/blog/page/4">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Temple Coding" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
  

</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Temple Coding</a></h1>
  
    <h2>código, tecnologia e outras nerdices</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:templecoding.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Procurar"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Arquivos</a></li>
  <li><a href="/blog/categories/videocast">Videocast</a></li>
  <li><a href="/sobre">Sobre</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/06/06/testes-unitarios-no-biztalk-com-o-bizunit/">Testes unitários no BizTalk com o BizUnit</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-06-06T00:00:00-04:00" pubdate data-updated="true">06/06/2012</time>
        
         | <a href="/blog/2012/06/06/testes-unitarios-no-biztalk-com-o-bizunit/#disqus_thread">Comentários</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Hoje vou falar um pouco sobre como fazer &ldquo;testes unitários&rdquo; no BizTalk. Tenho que usar as aspas pra dizer testes unitários porque o BizTalk, sendo uma ferramenta de integração, só podemos fazer testes integrados. Mas a unidade nesse caso, pode ser definida como sendo cada integração diferente.</p>

<p>O <a href="https://github.com/vintem/OrderProcessing">código está disponivel no github</a>.</p>

<p>Vou começar de uma forma bem simples, apenas apresentando o BizUnit. Primeiro a definição como diz no site do próprio BizUnit:</p>

<blockquote>BizUnit enables automated tests to be rapidly developed. BizUnit is a flexible and extensible declarative test framework targeted that rapidly enables the automated testing of distributed systems, for example it is widely used to test BizTalk solutions. BizUnit is fully extensible. Its approach is to enable test cases to be constructed from generic reusable test steps, test cases are defined in XML which allows them to be auto-generated and also enables the ‘fixing up’ of Url’s for different environments, e.g. test, staging and production environments. Defining test cases in XML enables test cases to be auto-generated.</blockquote>


<p>A primeira coisa que preciso dizer, é que apesar do BizUnit funcionar, parece ser um projeto open source meio parado, quero dizer, não encontrei (até o momento desse post) nem o código fonte disponivel para baixa-lo. E como a maioria dos projetos open source, a documentação não é o forte. Por exemplo, já na definição do framework diz que podemos definir os casos de testes em arquivos XML, isso é verdade, mas também podemos fazer isso em código, no C#, como qualquer outro teste unitário. E é isso que vou fazer nesse exemplo.</p>

<p>O cenário para esse teste será bem simples, um pedido terá origem como um arquivo XML em uma pasta e caso ele tenha um valor total maior que 1000 será direcionado para uma pasta de pedidos especiais, senão, ele ira para uma pasta de pedidos regulares.</p>

<p><a href="http://templecoding.com/wp-content/uploads/2012/06/fluxo_pedido1.png"><img class="aligncenter size-full wp-image-443" title="Fluxo de um pedido" src="http://templecoding.com/wp-content/uploads/2012/06/fluxo_pedido1.png" alt="" width="626" height="302" /></a></p>

<p>O que queremos com um teste unitário para esse caso, é que ele possa ser executado diversas vezes de uma forma simples e verificável.</p>

<p>O nosso esquema XML também vai manter a simplicidade:</p>

<pre>   00001
    Thiago Temple
    2012-06-05T00:00:00
    600</pre>


<p>Para o projeto no BizTalk apenas vou gerar o Schema para essa mensagem, gerar um Distinguished Field no campo Total para poder fazer o roteamento na própria porta.</p>

<p>Veja como ficou a solução:</p>

<p><a href="http://templecoding.com/wp-content/uploads/2012/06/visual_studio_solution1.png"><img class="aligncenter size-full wp-image-448" title="visual_studio_solution" src="http://templecoding.com/wp-content/uploads/2012/06/visual_studio_solution1.png" alt="" width="282" height="251" /></a></p>

<p>E os filtros nas portas:</p>

<p><a href="http://templecoding.com/wp-content/uploads/2012/06/Send_standard_port_filter1.png"><img class="aligncenter size-medium wp-image-449" title="Send_File_StandardOrder_Filter" src="http://templecoding.com/wp-content/uploads/2012/06/Send_standard_port_filter1-300x258.png" alt="" width="300" height="258" />
</a><a href="http://templecoding.com/wp-content/uploads/2012/06/Send_special_port_filter1.png"><img class="aligncenter size-medium wp-image-450" title="Send_File_SpecialOrder_Filter" src="http://templecoding.com/wp-content/uploads/2012/06/Send_special_port_filter1-300x260.png" alt="" width="300" height="260" /></a></p>

<p>Com tudo explicado, vamos ao teste. O que vamos verificar nesse teste é que ao salvar um arquivo na pasta de entrada, o mesmo deverá ser roteado para a pasta correta. Portanto criei dois arquivos com dados de teste, um com valor maior de 1000 chamado SpecialOrder.xml e outro com um valor menor de 1000 chamado StandardOrder.xml.</p>

<p>Para o teste estou usando o MSTest mas também é possivel usar o NUnit facilmente.</p>

<p>Começamos com a classe de teste para o caso regular que chamei de ProcessingStandardOrder.</p>

<pre class="brush: csharp;">[TestClass]
    public class ProcessingStandardOrder
    {
        [TestMethod]
        public void StandardOrderShouldBeSavedInCorrectFolder()
        {
            var testCase = new TestCase { Name = "Test that standard order is saved in correct folder" };

            testCase.SetupSteps.Add(DeleteFilesStep());

            testCase.ExecutionSteps.Add(CreateFileStep());

            testCase.ExecutionSteps.Add(ValidateFileExits());

            var bizUnit = new BizUnit.BizUnit(testCase);
            bizUnit.RunTest();
        }

        private TestStepBase ValidateFileExits()
        {
            var validateFileExistsSTep = new FileReadMultipleStep
            {
                DirectoryPath = @"C:Biztalk InOutOrderProcessingStandard",
                SearchPattern = "*.xml",
                ExpectedNumberOfFiles = 1,
                Timeout = 3000,
                DeleteFiles = true
            };
            return validateFileExistsSTep;
        }

        private static CreateStep CreateFileStep()
        {
            var createImportTestFile = new CreateStep
            {
                CreationPath = @"C:Biztalk InOutOrderProcessingInStandardOrder.xml",
                DataSource = new FileDataLoader { FilePath = @"......OrderProcessing.TestsTestDataStandardOrder.xml" }
            };
            return createImportTestFile;
        }

        private static DeleteStep DeleteFilesStep()
        {
            var deleteFiles = new DeleteStep
            {
                FilePathsToDelete = new Collection { @"C:Biztalk InOutOrderProcessingIn*.xml", @"C:Biztalk InOutOrderProcessingStandard*.xml" }
            };
            return deleteFiles;
        }
    }</pre>


<p>O codigo é bem simples. O importante é saber que o BizUnit sempre vai executar os SetupSteps antes dos ExecutionSteps e depois ainda vai executar todos os CleanupSteps. Criei um TestCase, limpei o diretório de entrada e de destino, copiei o meu arquivo com os dados de teste e verifiquei que o mesmo estava na pasta esperada.</p>

<p>O importante é notar o funcionamento do BizUnit. É preciso criar um TestCase e criar um BizUnit passando o teste. Veja também que no método ValidateFileExists eu adicionei um Timeout de 3000 milisegundos, isso é importante porque precisamos esperar que o arquivo seja processado pelo BizTalk, caso contrário é possivel que o teste rode antes que o BizTalk processe o arquivo e então o teste falhará.</p>

<p>Por fim a classe que testa o caso especial ProcessingSpecialOrder:</p>

<pre class="brush: csharp;">[TestClass]
    public class ProcessingSpecialOrder
    {
        [TestMethod]
        public void SpecialOrderShouldBeSavedInCorrectFolder()
        {
            var testCase = new TestCase { Name = "Test that special order is saved in correct folder" };

            testCase.SetupSteps.Add(DeleteFilesStep());

            testCase.ExecutionSteps.Add(CreateFileStep());

            testCase.ExecutionSteps.Add(ValidateFileExits());

            var bizUnit = new BizUnit.BizUnit(testCase);
            bizUnit.RunTest();
        }

        private TestStepBase ValidateFileExits()
        {
            var validateFileExistsSTep = new FileReadMultipleStep
            {
                DirectoryPath = @"C:Biztalk InOutOrderProcessingSpecial",
                SearchPattern = "*.xml",
                ExpectedNumberOfFiles = 1,
                Timeout = 3000,
                DeleteFiles = true
            };
            return validateFileExistsSTep;
        }

        private static CreateStep CreateFileStep()
        {
            var createImportTestFile = new CreateStep
            {
                CreationPath = @"C:Biztalk InOutOrderProcessingInSpecialOrder.xml",
                DataSource = new FileDataLoader { FilePath = @"......OrderProcessing.TestsTestDataSpecialOrder.xml" }
            };
            return createImportTestFile;
        }

        private static DeleteStep DeleteFilesStep()
        {
            var deleteFiles = new DeleteStep
            {
                FilePathsToDelete = new Collection { @"C:Biztalk InOutOrderProcessingIn*.xml", @"C:Biztalk InOutOrderProcessingSpecial*.xml" }
            };
            return deleteFiles;
        }
    }</pre>


<p>É isso, lembrando que o <a href="https://github.com/vintem/OrderProcessing">código está disponivel no github</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/09/26/injecao-de-dependencia-em-atributosfiltros-do-mvc/">Injeção de Dependência em Atributos/Filtros do MVC</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-09-26T00:00:00-04:00" pubdate data-updated="true">26/09/2011</time>
        
         | <a href="/blog/2011/09/26/injecao-de-dependencia-em-atributosfiltros-do-mvc/#disqus_thread">Comentários</a>
        
      </p>
    
  </header>


  <div class="entry-content"><!--:pt-->


<p>É muito comum termos dropdowns/combos que contém o mesmo tipo de dados em páginas diferentes. Por exemplo digamos que seja necessário um combo com status em diferente páginas do projeto e que esses diferentes status tenham que vir do banco de dados.</p>

<p>Uma forma de mostrar isso na página, é salvar uma lista com os status que você pega do banco de dados na propriedade ViewData e exibir na página.</p>

<p>Como não devemos repetir esse código sempre, o que eu fiz foi criar um filtro do ASP.Net MVC e decorar as actions que precisam desses dados com esse filtro. Essa classe ficou assim:</p>

<pre class="brush: csharp;">public class ListaStatusAttribute : ActionFilterAttribute
{
    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        var repository = new NHibernateRepository();
        var tiposDocumento = repository.FindAll().OrderBy(t => t.Descricao);
        var controllerBase = filterContext.Controller;
        controllerBase.ViewData.Add("Status", tiposDocumento);
    }
}</pre>


<p>Ótimo, agora é só decorar as actions com esse atributo. No ViewData teremos um item chamado Status com todos os status ordenados pela descricao. Um código feito uma vez só. Mas o que eu não gosto do código acima é que eu crio dentro da método uma instância da classe NHibernateRepository. Eu gostaria que isso fosse resolvido sem que uma dependência direta fosse criada para essa classe, afinal eu sei que essa classe implementa a interface IRepository, portanto eu posso ter uma dependência para a interface, o que é muito mais elegante.</p>

<p>Ultimamente eu tenho usado o <a href="http://docs.castleproject.org/Windsor.MainPage.ashx">Windsor</a> para resolver todas as minhas dependências. E nesse caso vou usá-lo em conjunto com o ServiceLocator da <a href="http://entlib.codeplex.com/">Microsoft Enterprise Library</a>. Se você já usa o Windsor é bem fácil de resolver, se não usa, dê uma olhada no tutorial no site do projeto e verá como é fácil usá-lo junto com o MVC.</p>

<p>Uma vez com seus componentes registrados, adicione uma referência para Microsoft.Practices.ServiceLocation.dll e no global.asax faça o seguinte:</p>

<pre class="brush: csharp;">ServiceLocator.SetLocatorProvider(() => new WindsorServiceLocator(container));</pre>


<p>Isso vai adicionar ao ServiceLocator um provedor de serviços que será implementado usando o Windsor.
<a href="http://commonservicelocator.codeplex.com/wikipage?title=Castle%20Windsor%20Adapter&amp;referringTitle=Home&amp;ProjectName=commonservicelocator"> A classe WindsorServiceLocator pode ser encontrada para download aqui.</a></p>

<p>Pronto, agora dentro do meu atributo eu posso trocar o código para:</p>

<pre class="brush: csharp;">public override void OnActionExecuted(ActionExecutedContext filterContext)
{
    var repository = ServiceLocator.Current.GetInstance();
    var tiposDocumento = repository.FindAll().OrderBy(t => t.Descricao);
    var controllerBase = filterContext.Controller;
    controllerBase.ViewData.Add("Tipos", tiposDocumento);
}</pre>


<p>E aquela dependência feia foi removida.<!--:--></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/09/17/globalizacao-de-validacao-do-jquery-com-o-asp-net-mvc-3/">Globalização de validação do jQuery com o ASP.NET MVC 3</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-09-17T00:00:00-04:00" pubdate data-updated="true">17/09/2011</time>
        
         | <a href="/blog/2011/09/17/globalizacao-de-validacao-do-jquery-com-o-asp-net-mvc-3/#disqus_thread">Comentários</a>
        
      </p>
    
  </header>


  <div class="entry-content"><!--:pt-->


<p>O Asp.Net MVC 3 tem uma ótima funcionalidade que é a validação no cliente usando o plugin do <a href="http://docs.jquery.com/Plugins/Validation" target="_blank">jQuery validations</a> e usando um script da própria Microsoft a validação é feita sem que seja necessário nenhum codificação especial. Basta usar os atributos do namespace <em>System.ComponentModel.DataAnnotations.</em></p>

<p>Pra quem não sabe, para fazer essa validação basta adicionar os seguintes scripts (que já estão no template padrão de um novo site Asp.Net Mvc 3):</p>

<pre class="brush: html;">&lt;script src=”/Scripts/jquery-1.6.2.min.js” type=”text/javascript”&gt;&lt;/script&gt;
&lt;script src=”/Scripts/jquery.validate.min.js” type=”text/javascript”&gt;&lt;/script&gt;
&lt;script src=”/Scripts/jquery.validate.unobtrusive.min.js” type=”text/javascript”&gt;&lt;/script&gt;</pre>


<p>Muito simples de verdade! Mas existe um problema, esse script não é globalizado, então digamos que você tenha que usar uma data na sua classe e você gostaria de validá-la, por exemplo eu tinha uma classe que entre outras coisas tinha que salvar uma data, para simplificar, algo como isso:</p>

<pre class="brush: csharp;">public class Pessoa
{
    public string Nome { get; set; }
    public string Sexo { get; set; }
    public string Rg { get; set; }

    [DataType(DataType.EmailAddress)]
    public string Email { get; set; }

    [DataType(DataType.Date)]
    public DateTime? DataNascimento { get; set; }
}</pre>


<p>Quando eu informava a data 16/09/1980, por exemplo, automaticamente era detectado uma data inválida, já que o esperado é que a data estivesse no padrão mm/dd/aaaa, mas é claro que no Brasil o padrão é outro. Então como corrigir? Primeiro fazer uso do plugin <a href="https://github.com/jquery/globalize">Globalize do jQuery</a>, adicione referências a dois scripts (que é claro, podem ser baixados no site do projeto):<script type="text/javascript" src="@Url.Content("></script><script type="text/javascript" src="@Url.Content("></script></p>

<p>Depois disso, tudo o que precisa ser feito é determinar qual a cultura que quer usar e indicar o parser do globalize para validar a data:</p>

<pre class="brush: js;">Globalize.culture("pt-BR");
$.validator.methods.date = function(value, element) {
    return this.optional(element) || Globalize.parseDate(value);
};</pre>


<p>Não podia ser mais simples!<!--:--><!--:en--><!--:--></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/08/16/tornando-o-acesso-a-dados-simples-com-o-simple-data/">Tornando o acesso a dados simples com o Simple.Data</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-16T00:00:00-04:00" pubdate data-updated="true">16/08/2011</time>
        
         | <a href="/blog/2011/08/16/tornando-o-acesso-a-dados-simples-com-o-simple-data/#disqus_thread">Comentários</a>
        
      </p>
    
  </header>


  <div class="entry-content"><!--:pt-->


<p>Recentemente eu precisei fazer um trabalho que era bem simples do ponto de vista de acesso a dados. Era algo como ler arquivos textos e salvar os dados em uma base de dados SQL Server. Simples assim.</p>

<p>Se tratando de uma tarefa simples, usar um framework como o <a href="http://nhforge.org/Default.aspx" target="_blank">NHibernate</a> iria tornar a tarefa mais complexa do que precisaria. Eu poderia também usar o bom e velho ADO.NET, mas estamos em 2011 e já temos 4 versões do .NET Framework. Acho que já passei dessa fase.</p>

<p>Ai lembrei que recentemente ouvi um episódio do <a href="http://herdingcode.com/?p=305" target="_blank">Herding Code falando sobre um tal de Simple.Data.</a></p>

<p>E não é que o nome vem bem a calhar, o Simple.Data é realmente simples.</p>

<pre class="brush: csharp;">public Document Insert(Document newDocument)
{
    var db = new Database.Open();
    return db.Documents.Insert(newDocument);
}</pre>


<p>E foi tudo isso que eu precisei escrever para abrir uma conexão com o banco, com base na minha string de conexão configurada no meu arquivo <strong>app.config </strong>e inserir um documento na tabela documentos.</p>

<p>O Simple.Data faz uso do tipo <a href="http://robsonramos.com/index.php/2011/05/11/entendendo-o-tipo-dynamic-no-c/" target="_blank">dynamic do C# 4</a> e portanto é necessário usar a versão 4 do .NET Framework.</p>

<p>O que aconteceu no código acima é o que o Simple.Data entendeu que deveria existir uma tabela chamada Documents no banco de dados e automaticamente iria inserir um registro nessa tabela mapeando os campos da tabela com as propriedades da classe Document (desde que esses tivessem os mesmos nomes).</p>

<p>Da mesma forma se eu quiser fazer uma busca basta fazer algo assim:</p>

<pre class="brush: csharp;">public IEnumerable All()
{
    var db = Database.Open();
    return  db.Documents.All().Cast();
}</pre>


<p>Assim, estamos listando todos os registros da tabela Documents.</p>

<p>Agora imagine que essa tabela tenha um coluna chamada User e que, obviamente, o classe Document tem uma propriedade chamada User. Para fazer uma consulta filtrando pelo nome do usuario bastaria fazer assim:</p>

<pre class="brush: csharp;">var db = Database.Open();
Document document = db.Documents.FindByUser("nomedousuario");</pre>


<p>Lindo! Dinamicamente o Simple.Data vai procurar um registro que tenha o campo User = &ldquo;nomedousuario&rdquo; e vai popular as propriedades da classe com as colunas da tabela que tenham o mesmo nome.</p>

<p>Por fim, um último exemplo, digamos que exista uma colunda/propriedade chamada Amount e você queira pegar os documentos com valor maior que 50. Veja como é simples:</p>

<pre class="brush: csharp;">var db = Database.Open();
IEnumerable documents = db.Documents.FindAll(db.Documents.Amount &gt; 50).Cast();</pre>


<p>Com certeza existe mais coisas no Simple.Data do que eu citei aqui, mas a idéia é que ele é bem simples e rápido. <a href="http://bit.ly/p7XsUx">Usando o Nuget para adicionar o pacote</a>, adicionar uma string de conexão chamada <span class="Apple-style-span" style="font-family: Consolas, Monaco, monospace; font-size: 12px; line-height: 18px; white-space: pre;">Simple.Data.Properties.Settings.DefaultConnectionString</span> e pronto, você já consegue usar o Simple.Data.</p>

<p>Para saber mais visite <a href="http://bit.ly/oZ4teC" target="_blank">o wiki do projeto no GitHub</a>.</p>

<p><a href="http://bit.ly/r3SnzM">O código fonte usado nesse exemplo pode ser visto aqui</a>.<!--:--></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/08/04/criando-snippets-para-o-visual-studio-2010/">Criando Snippets para o Visual Studio 2010</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-04T00:00:00-04:00" pubdate data-updated="true">04/08/2011</time>
        
         | <a href="/blog/2011/08/04/criando-snippets-para-o-visual-studio-2010/#disqus_thread">Comentários</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><strong>Motivação</strong></p>

<p>Apesar de ser e gostar muito de ser um desenvolvedor, sou totalmente a favor de escrever a menor quantidade de código possível. Porque menos código, geralmente quer dizer menos erros. Com isso em mente eu resolvi criar Snippets de código no Visual Studio 2010. Você pode até não saber o que é um snippet mas com certeza já usou um. Um snippet é uma pequena porção de código que é reutilizável. Por exemplo, entre no seu Visual Studio, e dentro de um método digite <em>foreach</em> e aperte <strong>Tab</strong>. Pronto, isso é um snippet.</p>

<p>Seguindo essa mentalidade e fazendo testes unitários eu me peguei escrevendo diversas vezes esse código:</p>

<pre class="brush: csharp;">[Test]
public void Meuteste()
{

}</pre>


<p>Meu objetivo era que digitasse apenas um comando de atalho (nesse caso escolhi <em>ntest</em>) e que esse código fosse gerado pra mim, permitindo que eu apenas alterasse o nome do método.</p>

<p><strong>Snippet Designer</strong></p>

<p>O Visual Studio 2010 permite que você crie snippets através do seu editor de XML, que é o padrão, afinal de contas um snippet nada mais é do que um arquivo xml. Mas existe uma extensão para o VS2010 chamada Snippet Desiner que facilita um pouco o trabalho. Então vá em Tools –&gt; Extension Manager e adicione a extensão.</p>

<p><a href="http://templecoding.com/wp-content/uploads/2011/08/Snippet-Designer.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: block; margin-left: auto; margin-right: auto; padding-top: 0px; border-style: initial; border-color: initial; border-width: 0px;" title="Snippet Designer" src="http://templecoding.com/wp-content/uploads/2011/08/Snippet-Designer_thumb.png" alt="Snippet Designer" width="569" height="397" border="0" /></a></p>

<p><strong>Criando o Snippet</strong></p>

<p>Crie um novo projeto no VS2010 e adicione um arquivo do tipo XML. Dê o nome que quiser, mas use a extensão .snippet. No meu caso o nome do arquivo é NUnitTest.snippet.</p>

<p>Ao criar o arquivo ele estará vazio e, portanto, o Snippet Designer não irá abri-lo. Clique com o botão direito no arquivo e me Open With, selecione o XML (Text) Editor e clique em OK.</p>

<p><a href="http://templecoding.com/wp-content/uploads/2011/08/EditorXml.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: block; margin-left: auto; margin-right: auto; padding-top: 0px; border-style: initial; border-color: initial; border-width: 0px;" title="EditorXml" src="http://templecoding.com/wp-content/uploads/2011/08/EditorXml_thumb.png" alt="EditorXml" width="346" height="229" border="0" /></a></p>

<p>Dentro do documento XML clique com o botão direito e selecione a opção Insert Snipet</p>

<p><a href="http://templecoding.com/wp-content/uploads/2011/08/Inser-.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: block; float: none; margin-left: auto; margin-right: auto; padding-top: 0px; border: 0px;" title="Inser" src="http://templecoding.com/wp-content/uploads/2011/08/Inser-_thumb.png" alt="Inser " width="382" height="170" border="0" /></a></p>

<p>Em seguida selecione a opção Snippet.</p>

<p><a href="http://templecoding.com/wp-content/uploads/2011/08/Inserir-Snippet.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: block; float: none; margin-left: auto; margin-right: auto; padding-top: 0px; border: 0px;" title="Inserir Snippet" src="http://templecoding.com/wp-content/uploads/2011/08/Inserir-Snippet_thumb.png" alt="Inserir Snippet" width="463" height="173" border="0" /></a></p>

<p>O xml necessário para a criação do snippet será gerado, como você pode perceber ele mesmo é um snippet. #inception #feelings :)</p>

<p>É possível editar ali mesmo o xml, ou então podemos usar o Snippet Designer que acabos de instalar. Salve o arquivo e feche-o. No Solution Explorer, mais uma vez clique com o botão direito no arquivo e em Open With e dessa vez selecione a opção Snippet Desiger, uma tela como a abaixo deverá aparecer.</p>

<p><a href="http://templecoding.com/wp-content/uploads/2011/08/Snippet-Designer2.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: block; margin-left: auto; margin-right: auto; padding-top: 0px; border-style: initial; border-color: initial; border-width: 0px;" title="Snippet Designer2" src="http://templecoding.com/wp-content/uploads/2011/08/Snippet-Designer2_thumb.png" alt="Snippet Designer2" width="555" height="350" border="0" /></a></p>

<p>Algumas coisas que precisam ser alteradas, no topo do lado esquerdo, dê um título e selecione a linguangem, no meu caso foi NUnit Test e C#. As proprieades do arquivo são bem claras, mas o que você deve ter uma atenção é pra propriedade <strong>Shortcut. </strong>O que você colocar ali é o que você vai digitar antes do Tab na hora de codificar. Eu preenchi o meu como <em>ntest.</em></p>

<p>Na parte de baixo é onde você define a parte do código que é customizável quando você fica dando tabs no seu snippet, no meu caso eu queria customizar apenas o nome do método, então alterei o item que vem ali para <em>testName</em> e deixei campo Defaults to para <em>testName</em> também.</p>

<p>Por fim, a principal e maior parte da tela é onde você coloca o seu código do snippet, apenas preencha o código que você quer ali normalmente e substituia a parte customizável pelas variáveis que você criou, prestando atenção que o nome dessa variável deve estar entre $$, assim: <em>$testName$. </em>Veja como ficou meu snippet após as mudanças.</p>

<p><a href="http://templecoding.com/wp-content/uploads/2011/08/Snippet-Editado.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: block; margin-left: auto; margin-right: auto; padding-top: 0px; border-style: initial; border-color: initial; border-width: 0px;" title="Snippet Editado" src="http://templecoding.com/wp-content/uploads/2011/08/Snippet-Editado_thumb.png" alt="Snippet Editado" width="556" height="355" border="0" /></a></p>

<p><strong>Utilizando o Snippet</strong></p>

<p>O VS2010 usa diversos snippets, mas obviamente é muito fácil adicionar aqueles que foram criados pelos usuários. Basta carregar os arquivos .snippet criados por você dentro dele.</p>

<p>Por padrão quando se instala o VS2010 ele cria uma pasta dentro da pasta Meus Documentos chamada Visual Studio 2010, ali navegue para –&gt; Code Snippets –&gt; Visual C# –&gt; My Code Snippets. Copie o(s) arquivo(s) .snippet que você criou e cole dentro dessa pasta. Isso é claro, considerando que são snippets de C#, caso contrário coloque na pasta correta.</p>

<p>É provável que tudo já esteja funcionando, mas para ter certeza, dentro do VS2010 vá em Tools –&gt; Code Snippets Manager, selecione a linguagem e deve aparecer algo assim.</p>

<p><a href="http://templecoding.com/wp-content/uploads/2011/08/Code-Snippet-Manager.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: block; margin-left: auto; margin-right: auto; padding-top: 0px; border-style: initial; border-color: initial; border-width: 0px;" title="Code Snippet Manager" src="http://templecoding.com/wp-content/uploads/2011/08/Code-Snippet-Manager_thumb.png" alt="Code Snippet Manager" width="374" height="280" border="0" /></a></p>

<p>Se não aparecer ali, basta clicar em Add, navegar e selecionar a pasta onde estão os arquivos .snippet. Pronto! Isso é tudo que você precisa.</p>

<p>Agora é só testar. Vá até uma classe, digite <em>ntest</em> e aperte <strong>Tab. </strong>O código do snippet deve aparecer e o cursor deve estar posicionado no nome do método, pronto para que este seja alterado.</p>

<p><strong>Finalizando</strong></p>

<p>O snippet que eu criei é bem simples, mas de um código que eu faço toda hora, se você tem alguma coisa desse tipo e quer facilitar, esse é o caminho. :)</p>

<p><a href="https://github.com/vintem/VS2010Snippets" target="_blank">O código desse projeto está diposnível para download aqui.</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/05/29/analise-de-livro-growing-object-oriented-software-guided-by-tests/">Análise: Growing Object-Oriented Software, Guided by Tests</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-05-29T00:00:00-04:00" pubdate data-updated="true">29/05/2011</time>
        
         | <a href="/blog/2011/05/29/analise-de-livro-growing-object-oriented-software-guided-by-tests/#disqus_thread">Comentários</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Eu acabei de ler <a href="http://www.amazon.com/gp/product/0321503627/ref=as_li_tf_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0321503627&amp;linkCode=as2&amp;tag=tempcodi0f-20" rel="nofollow">Growing Object-Oriented Software, Guided by Tests</a> e posso dizer que é um livro altamente recomendável.</p>

<p><a href="http://www.amazon.com/gp/product/0321503627/ref=as_li_tf_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0321503627&amp;linkCode=as2&amp;tag=tempcodi0f-20" rel="nofollow"><img class="size-full wp-image-188 alignright" style="border: 20px none;" title="Growing Object-Oriented Software, Guided by Tests" src="http://templecoding.com/wp-content/uploads/2011/05/51VI2SgJRwL._SL205.jpg" alt="Growing Object-Oriented Software, Guided by Tests" width="154" height="205" /></a></p>

<p>Para quem está interessado em começar, ou já começou e quer apefeiçoar a prática de desenvolver software usando testes antes de escrever o &ldquo;código de produção&rdquo;, é um ótimo livro.</p>

<blockquote><em>Testing is no longer just about keeping defects from the users; instead, it&#8217;s about helping the team to understand the features that users need and to deliver those features reliably and predictably.</em></blockquote>


<p>Após duas partes teóricas, o livro, na terceira parte, começa a ficar mais prático.</p>

<p>A terceira parte do livro se passa toda desenvolvendo um exemplo e realmente evoluindo uma aplicação aos poucos. Exemplo feito em Java, mas que nada atrabalha para quem não conhece muito da linguagem. Além disso, é ótimo seguir a linha de pensamento dos autores e ver como eles enxergam a evolução de um software orientado a objetos. E uma das melhores partes de sistema de exemplo, é que ele não fica no básico, muito pelo contrário, traz problemas do &ldquo;mundo real&rdquo;, como interação com serviços externos e testes de interface de usuário.</p>

<p>Embora a terceira parte seja ótima, é na quarta parte onde o livro realmente mostra seu valor. A quarta parte fala de desenvolvimento orientado a testes de forma sustentável, tratando de assuntos como: quando usar objetos mock ou não, facilitar a leitura e o entendimento dos testes, construção de objetos complexos necessários aos testes, entre outros.</p>

<p>Ainda existe um capítulo muito interessante que fala sobre testes na camada de persistência a dados, uma parte que eu sempre achei complexa de se testar. Ali, encontrei dicas valiosas.</p>

<p>Uma ótima leitura, recomendo!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/03/16/o-livro-eletronico-e-so-vantagem/">O livro eletrônico é só vantagem</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-16T00:00:00-04:00" pubdate data-updated="true">16/03/2011</time>
        
         | <a href="/blog/2011/03/16/o-livro-eletronico-e-so-vantagem/#disqus_thread">Comentários</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Se você ainda não se convenceu de que os livros eletrônicos são uma boa opção ou mesmo uma realidade hoje em dia, quem sabe a lista de vantagens abaixo possa te ajudar.</p>

<p>Eu virei um fã e um adepto dos livros eletrônicos, sério, acho pouco provável eu comprar um livro em papel novamente (havendo a opção eletrônica) e principalmente se for técnico.</p>

<p>Veja só se essa lista te ajuda:</p>

<ol>
    <li>geralmente são mais baratos</li>
    <li>se você compra livros em papel on-line paga frete, nos eletrônicos, obviamente não</li>
    <li>você não precisa esperar que eles cheguem pelo correio</li>
    <li>já existem diversos livros em português e podem ser comprados em sites brasileiros como <a href="http://www.livrariasaraiva.com.br/livros-digitais/?ID=BD61DCEF7DB030E0D19190666" target="_blank">Saraiva</a> e <a href="http://www.livrariacultura.com.br/scripts/ebooks/index.asp?sid=8738214911315816569556325&amp;k5=C76F132&amp;uid=" target="_blank">Cultura</a></li>
    <li>se você gosta de anotar nos livros, existe um software da Amazon, o <a href="http://www.amazon.com/gp/help/customer/display.html/ref=sv_kinc_9?ie=UTF8&amp;nodeId=200127470" target="_self">Kindle</a> que permite marcar e anotar nos textos</li>
    <li>você não precisa comprar um Tablet ou E-Reader para ler seus livros eletrônicos, esse mesmo software do <a href="http://www.amazon.com/gp/help/customer/display.html/ref=sv_kinc_9?ie=UTF8&amp;nodeId=200127470" target="_blank">Kindle está disponível para diversas plataformas</a>, inclusive celulares</li>
    <li>se você tiver um E-Reader ou Tablet, pode levar todos os seus livros com você e <a href="http://abrindoolivro.wordpress.com/2010/09/04/ereaders-no-brasil-novidades/" target="_blank">existem diversos no mercado</a></li>
    <li>se você não quiser comprar um E-Reader e tiver um smartphone também é possível. Eu tenho um Samsung Galaxy S com Android e a leitura é muito boa e tranquila, o maior problema é pra ler código ou ver imagens, quando é só texto, vai bem.</li>
    <li>é ecologicamente correto</li>
</ol>


<p>A maior desvantagem do livro eletrônico é que não é possível expo-lo em uma instante, bom, pelo menos não em uma real<a href="http://www.shelfari.com/vintem/shelf" target="_self"> porque na virtual já dá</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/10/salvando-alteraes-inacabadas-com-git/">Salvando alterações inacabadas com Git</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-10T00:00:00-05:00" pubdate data-updated="true">10/11/2010</time>
        
         | <a href="/blog/2010/11/10/salvando-alteraes-inacabadas-com-git/#disqus_thread">Comentários</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Quanto mais eu uso o Git, mais eu gosto dele. Fato.</p>

<p>Sabe quando você está no meio de uma atividade, ela não está acabada, e chega um bug que você tem que corrigir? Ai o que você faz com a sua alteração que está no meio do caminho?</p>

<p>O Git tem um comando chamado stash. O stash é uma área separada dos seus commits feita exatamente para isso, salvar modificações inacabadas. E o uso é bem simples.</p>

<p>git stash save</p>

<p>Esse comando salva as modificações do diretório de trabalho e limpa o log para o último commit.</p>

<p>Por exemplo, digamos que você tenha um projeto que você concluiu a versão 1 e está no meio do desenvolvimento da versão 2.0 e você criou um branch para isso.</p>

<p><a href="http://templecoding.com/wp-content/uploads/2010/11/v2.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="v2" src="http://templecoding.com/wp-content/uploads/2010/11/v2_thumb.png" alt="v2" width="346" height="139" border="0" /></a></p>

<p>E então, enquanto você no meio do desenvolvimento de uma outra atividade, aparece um bug para corrigir, seu status do Git estaria mais ou menos assim:</p>

<p><a href="http://templecoding.com/wp-content/uploads/2010/11/git_status.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="git_status" src="http://templecoding.com/wp-content/uploads/2010/11/git_status_thumb.png" alt="git_status" width="633" height="217" border="0" /></a></p>

<p>Você não pode fazer um commit, porque se você fizer isso o build irá quebrar, e você é muito responsável para fazer uma coisa dessas, né?. O que fazer?`</p>

<p><a href="http://templecoding.com/wp-content/uploads/2010/11/moron.jpg"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="moron" src="http://templecoding.com/wp-content/uploads/2010/11/moron_thumb.jpg" alt="moron" width="244" height="184" border="0" /></a></p>

<p>É ai que o git stash resolve. Com o comando git stash save você obtém como resultado:</p>

<p><a href="http://templecoding.com/wp-content/uploads/2010/11/stash.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="stash" src="http://templecoding.com/wp-content/uploads/2010/11/stash_thumb.png" alt="stash" width="660" height="265" border="0" /></a></p>

<p>O buffer fica limpo, você já pode fazer um checkout da versão 1.0, corrigir o bug e depois voltar para o branch da versão 2.0 e fazer um rebase da versão 1.0.</p>

<p>Quando estiver nesse ponto basta executar o comando git stash pop para resgatar suas atualizações.</p>

<p><a href="http://templecoding.com/wp-content/uploads/2010/11/stash_pop.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="stash_pop" src="http://templecoding.com/wp-content/uploads/2010/11/stash_pop_thumb.png" alt="stash_pop" width="553" height="343" border="0" /></a></p>

<p>Pronto, você está no ponto onde parou. E viva o controle de versões. <img class="wlEmoticon wlEmoticon-smile" style="border-style: none;" src="http://templecoding.com/wp-content/uploads/2010/11/wlEmoticon-smile1.png" alt="Alegre" /></p>

<p>Existem mais opções no comando stash. Eu recomendo dar uma olhada na <a href="http://www.kernel.org/pub/software/scm/git/docs/git-stash.html">documentação do git</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/05/ruby-para-desenvolvedores-netparte-2/">Ruby para desenvolvedores .NET–parte 2</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-05T00:00:00-04:00" pubdate data-updated="true">05/11/2010</time>
        
         | <a href="/blog/2010/11/05/ruby-para-desenvolvedores-netparte-2/#disqus_thread">Comentários</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div style="padding-left: 10px; border: 1px dashed;">

Esta é uma série de artigos sobre Ruby para desenvolvedores .NET, confira os outros em:

<a href="http://templecoding.com/2010/11/03/ruby-para-desenvolvedores-netparte-1/">Ruby para desenvolvedores .NET – parte 1</a>

</div>


<p>Ruby, é uma linguagem orientada a objetos. É  possível reconhecer, apenas com pequenas diferenças na sintaxe, algumas similaridades e diferenças de funcionamento, se comparado com o C#.</p>

<p>Podemos ver no código abaixo, a definição de uma classe(Usuario), a definição de um construtor (initialize), a definição de um método (autorizar_acesso) e a criação de 2 atributos, nome e email.</p>

<pre class="brush: ruby;">class Usuario
  attr_accessor :nome, :email

  def initialize(nome)
    @nome = nome
  end

  def autorizar_acesso
    false
  end
end</pre>


<p>O que podemos ver de diferente aqui, é que quando chamamos o método attr_accessor para criar as propriedades nome e email, internamente o Ruby cria duas variáveis de instância chamadas @nome e @email e essas variáveis podem, obviamente, ser acessadas por qualquer método daquele objeto.’</p>

<p>A propósito, instanciar a class Usuario é tão simples quanto:</p>

<pre class="brush: ruby;">usuario = Usuario.new</pre>


<p><strong>Retorno de valores</strong></p>

<p>Uma outra coisa importante de lembrar no Ruby, é que a última instrução de um método sempre é retornada. Portanto dentro do método autorizar_acesso, estamos retornando o valor false. Colocar false como última instrução (e nesse caso, a única) é o mesmo que dizer return false.</p>

<p>Por exemplo, os dois métodos abaixo fazem a mesma coisa:</p>

<pre class="brush: ruby;">def soma(x, y)
  # faz um monte de coisa desnecessaria aqui
  x + y
end

def soma(x, y)
  # faz um monte de coisa desnecessaria aqui
  resultado_soma = x + y
  return resultado_soma
end</pre>


<p>Nos dois casos, x é somado a y e o resultado da soma é retornado.</p>

<p><strong>Herança</strong></p>

<p>Assim como em C#, Ruby também tem <a href="http://pt.wikipedia.org/wiki/Heran%C3%A7a_(inform%C3%A1tica)">herança</a> como podemos ver no exemplo abaixo:</p>

<pre class="brush: ruby;">class Usuario
  attr_accessor :nome, :email

  def initialize(nome)
    @nome = nome
  end

  def autorizar_acesso
    false
  end
end

class UsuarioEspecial &lt; Usuario
  def autorizar_acesso
    true
  end
end</pre>


<p>No código acima a classe UsuarioEspecial herda da classe Usuario e sobrescreve o método autorizar_acesso. Assim já podemos ver que é possível usar também o polimorfismo.</p>

<p><strong>Métodos Estáticos</strong></p>

<p>Ruby não tem métodos estáticos realmente, mas ele tem, o que é conhecido como <span style="text-decoration: underline;">métodos de classe</span> e funcionam de forma similar aos métodos estáticos do C#. Para  usar métodos de classe basta que na declaração do método seja colocada a palavra chave <span style="text-decoration: underline;">self</span>, como podemos ver:</p>

<pre class="brush: ruby;">class UsuarioEspecial &lt; Usuario

  def self.salvar
    enviar_email("texto do email")
    #salvar os dados do usuario
  end

  def autorizar_acesso
    true
  end

private

  def enviar_email(txt)
    # envia email
  end
end</pre>


<p>O método salvar pode ser chamado diretamente na classe UsuarioEspecial, não é necessário criar uma instância.</p>

<pre class="brush: ruby;">UsuarioEspecial.salvar</pre>


<p>Ainda no código acima podemos ver que para declarar um método privado pasta adicionar a palavra chave <span style="text-decoration: underline;">private</span> e qualquer método declarado abaixo dela será considerado privado.</p>

<p><strong>Interfaces</strong></p>

<p>Interfaces são um artifício  das linguagens estáticas para dizer ao compilador que uma classe tem um ou mais métodos.</p>

<p>No Ruby não existe um compilador e portanto não existe essa checagem prévia. Também existe a questão de que podemos alterar uma classe Ruby mesmo depois que ela já foi declarada, mas vamos falar disso depois. Portanto não existe a necessidade de interfaces.</p>

<p>Digamos que exista a seguinte situação feita em C#:</p>

<pre class="brush: csharp;">interface IControlePagamento
{
    void Pagar();
}

class Pagamento : IControlePagamento
{
    public void Pagar()
    {
        // logica de pagamento
    }
}</pre>


<p>O que esse código bem simples faz, é dizer ao compilador que a classe Pagamento implementa os métodos da Interface IControlePagamento. Em Ruby a única coisa que temos que fazer é efetivamente implementar o método Pagar()</p>

<pre class="brush: ruby;">class ControlePagamento
  def pagar
  end
end</pre>


<p>Isso tem vantagens e desvantagens.</p>

<p>A vantagem é que o código em Ruby é muito mais sucinto e objetivo, não é preciso escrever código para satisfazer o compilador. Existe apenas código para resolver o problema do negócio.</p>

<p>A desvantagem é que você não tem o aviso imediato do compilador caso o método não seja implementado.</p>

<p>Ainda assim, se você é adepto de técnicas como <a href="http://pt.wikipedia.org/wiki/Test_Driven_Development">TDD</a>, esse é um problema fácil de resolver, já que seus testes ficariam responsáveis por isso.</p>

<p>Outro recurso disponível no Ruby é que, toda classe automaticamente herda da classe Class, na classe Class existe um método chamado <span style="text-decoration: underline;">respond_to?</span>. Esse método verifica se um objeto responde/contém a um determinado método.</p>

<p><a href="http://templecoding.com/wp-content/uploads/2010/11/respond_to_false.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;" title="respond_to_false" src="http://templecoding.com/wp-content/uploads/2010/11/respond_to_false_thumb.png" alt="respond_to_false" width="419" height="147" border="0" /></a></p>

<p>No exemplo acima a classe ControlePagamento foi definida sem o método pagar, veja que quando foi chamado o método respond_to? o retorno foi false.</p>

<p>Já abaixo o método foi definido e a resposta foi true.</p>

<p><a href="http://templecoding.com/wp-content/uploads/2010/11/respond_to_true.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;" title="respond_to_true" src="http://templecoding.com/wp-content/uploads/2010/11/respond_to_true_thumb.png" alt="respond_to_true" width="379" height="181" border="0" /></a></p>

<p>Enfim, existem opções para controlar isso e há gente que faça, mas vale dizer que pelo que tenho visto, o mais comum é simplesmente seguir uma convenção.</p>

<p><strong>Conclusão</strong></p>

<p>Nesse artigo já vimos mais algumas diferenças mais marcantes do Ruby, no próximo vou falar um pouco do Object Model do Ruby.</p>

<p>Duvidas, criticas ou sugestões? Deixe um comentário.<!--:--></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/03/ruby-para-desenvolvedores-netparte-1/">Ruby para desenvolvedores .NET–parte 1</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-03T00:00:00-04:00" pubdate data-updated="true">03/11/2010</time>
        
         | <a href="/blog/2010/11/03/ruby-para-desenvolvedores-netparte-1/#disqus_thread">Comentários</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Eu tenho usado Ruby já há algum tempo, principalmente em alguns desenvolvimentos pessoais usando o Rails. Mas eu trabalho com C# já há mais de 8 anos e vivi fechado nesse mundo .NET por muito tempo, muito mais do que eu gostaria. De qualquer forma, ruby já tem feito parte do meu dia a dia, então eu gostaria de compartilhar algumas coisas que já aprendi sobre ruby, para aqueles, que como eu, vivem no mundo .NET.</p>


<p>  <p><strong>Motivação</strong></p>  <p>Ruby é e deve ser considerada uma linguagem de primeira classe, é possível hoje realizar aplicativos de diversos fins com Ruby e não somente aplicações web usando Rails. Mas, muitas vezes as empresas preferem ficar com linguagens mais conhecidas no mercado como Java ou C# para suas aplicações.</p>  <p>Ok, se você não pode usar Ruby para construir suas aplicações é bem provável que possa usar Ruby como uma linguagem de scripting (que ela é), para ajudar em trabalhos marginais porém importantes que muitas vezes não são feitos, ou são feitos usando outras coisas como XML, como por exemplo realizar Builds e Deploys, fazer testes de aplicativos, entre outros.</p>  <p>Se você pode escolher qual a linguagem quer usar, melhor pra você, Ruby pode ser uma ótima escolha, como veremos.</p>  <p><strong>Interpretador</strong></p>  <p>A primeira coisa que precisamos para usar Ruby é um interpretador de Ruby. Existem vários interpretadores por ai, o que eu vou usar aqui é o <a href="http://ironruby.codeplex.com/" target="_blank">IronRuby</a>. O IronRuby é um interpretador do Ruby que permite usar Ruby sobre a plataforma .NET, ou seja, vai permitir que você use os assemblies que já está costumado. É Ruby, segue a especificação de Ruby, com o adicional do .NET. Ótimo não é?</p>  <p>Eu recomento instalar a versão 1.0 que é compatível com o Ruby 1.8.7, andei fazendo uns testes com a versão 1.1 do IronRuby e ainda dá vários paus (pelo menos na data atual). A vantagem dessa versão 1.1 é que ela já vem com <a href="http://viniciusquaiato.com/blog/ironruby-tools-for-visual-studio-2010/" target="_blank">ferramentas para o Visual Studio 2010</a>.</p>  <p><strong>O Console</strong></p>  <p>Uma vez com o IronRuby instalado, você deve ter o IronRuby Console no seu menu iniciar, ou então pode executar o console a partir de um prompt padrão com o comando iirb.</p>  <p>O console permite que você execute qualquer instrução ruby, vá e faça um teste simples:</p>  <p><a href="http://templecoding.com/wp-content/uploads/2010/11/console.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="console" border="0" alt="console" src="http://templecoding.com/wp-content/uploads/2010/11/console_thumb.png" width="511" height="339" /></a></p>  <p>Uma outra vantagem do Ruby é a “falta de cerimônia” no código como os {}, ;, () e afins. Aliando isso ao fato de ser uma linguagem interpretada, veja a diferença de um Hello World feito em C# para uma aplicação console e uma em Ruby.</p>  <pre class="brush: csharp;">using System;
namespace ConsoleApplication1
{</p>

<pre><code>class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine(string.Format(&amp;quot;Hello World, {0}&amp;quot;, args[0]));
    }
}
</code></pre>

<p>}</pre></p>

<p>E agora em Ruby:</p>




<pre class="brush: ruby;">puts "Hello World, #{ARGV[0]}"</pre>




<p>Considere, que além da diferença da linguagem, para rodar o aplicativo no .NET é preciso compilar, gerar um executável e então rodá-lo. E para rodar o script Ruby, considerando que ele foi salvo num arquivo chamado hello_world.rb basta executar o comando:</p>




<p><a href="http://templecoding.com/wp-content/uploads/2010/11/comando_ruby.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="comando_ruby" border="0" alt="comando_ruby" src="http://templecoding.com/wp-content/uploads/2010/11/comando_ruby_thumb.png" width="407" height="83" /></a></p>




<p><strong>Fortemente, Estaticamente e Dinamicamente tipado</strong></p>




<p>Falando da linguagem realmente, Ruby é uma linguagem fortemente e dinamicamente tipada. O que isso quer dizer?</p>




<p>Quer dizer as variáveis tem um tipo bem definido, por exemplo uma variável do tipo String não pode ser somada a uma variável do tipo Fixnum veja:</p>




<p><a href="http://templecoding.com/wp-content/uploads/2010/11/tipos.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="tipos" border="0" alt="tipos" src="http://templecoding.com/wp-content/uploads/2010/11/tipos_thumb.png" width="647" height="346" /></a></p>




<p>Veja que apenas por atribuir um valor às variáveis os tipos foram definidos como Fixnum e String, isso é definir uma tipagem dinamicamente, ou seja, no seu primeiro uso. Nos casos acima as variáveis texto e numero são instâncias das classes String e Fixnum respectivamente e por isso tem acessos aos seus métodos, então se você quiser concatenar as duas variáveis em uma string pode fazer o seguinte:</p>




<p><a href="http://templecoding.com/wp-content/uploads/2010/11/concat.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="concat" border="0" alt="concat" src="http://templecoding.com/wp-content/uploads/2010/11/concat_thumb.png" width="365" height="56" /></a></p>




<p>Veja que chamei o método to_s que converte para string e então foi gerado o texto “VinTem12”</p>




<p>Linguagens, estaticamente tipadas, como o C#, tem seu tipo definido em tempo de compilação, ou seja, antes da execução.</p>




<p><strong>Usando o .NET</strong></p>




<p>Como um exemplo simples de como é possível usar as classes do .NET a partir do IronRuby, vou mostrar um código básico de um MessageBox do Windows Forms.</p>




<p><a href="http://templecoding.com/wp-content/uploads/2010/11/clr.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="clr" border="0" alt="clr" src="http://templecoding.com/wp-content/uploads/2010/11/clr_thumb.png" width="650" height="363" /></a></p>




<p>O princípio é o mesmo para qualquer classe do .NET Framework. <img style="border-bottom-style: none; border-right-style: none; border-top-style: none; border-left-style: none" class="wlEmoticon wlEmoticon-smile" alt="Alegre" src="http://templecoding.com/wp-content/uploads/2010/11/wlEmoticon-smile.png" /></p>




<p><strong>Concluindo</strong></p>




<p>Essa foi apenas uma apresentação inicial de como instalar um ambiente Ruby no Windows, do console do Ruby e da diferença mais básica entre Ruby e C# que é a tipagem.</p>




<p>Nos próximos vou falar um pouco mais a fundo das características do Ruby e quais as diferenças para o C#.</p>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/5/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/3/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/07/30/responsabilidade-unica-com-javascript/">Só é uma bagunça se você deixar. Responsabilidade única com JavaScript</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/23/meu-ted-talk-favorito/">Meu TED Talk favorito</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/16/programacao-orientada-a-coincidencia/">Programação orientada à coincidência</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/10/quatro-bons-livros-para-mudar-a-forma-como-voce-ve-escreve-javascript/">Quatro bons livros para mudar a forma como você vê/escreve JavaScript</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/04/analise-do-livro-pragmatic-thinking-and-learning/">Análise do livro Pragmatic Thinking and Learning</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Thiago Temple -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>


<script type="text/javascript">
var sc_project=5357260;
var sc_invisible=1;
var sc_security="14d7610a";
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" + scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="web stats"
href="http://statcounter.com/free-web-stats/" target="_blank"><img
class="statcounter" src="http://c.statcounter.com/5357260/0/14d7610a/1/"
alt="web stats"></a></div></noscript>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'templecoding';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>






<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
